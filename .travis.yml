language: java
jdk:
  - openjdk11

install: ./mvnw clean install

before_script: ./mvnw --projects cloudcmr-back spring-boot:start

script:
  - cd cloudcmr-front && npm run test:unit
  - cd cloudcmr-front && npm run test:e2e

after_script: ./mvnw --projects cloudcmr-back spring-boot:stop

cache:
  directories:
    - node_modules